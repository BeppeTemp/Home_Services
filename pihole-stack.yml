---
version: "3"

services:
  pihole:
    image: pihole/pihole:latest
    ports:
      - "53:53/tcp"
      - "53:53/udp"
      - "67:67/udp"
      - "50001:80/tcp"
    environment:
      PUID: 1000
      PGID: 1000
      TZ: 'Europe/Rome'
      WEBPASSWORD: ''
    volumes:
      - '/volume1/docker/pihole/config:/etc/pihole/'
      - '/volume1/docker/pihole/dnsmasq:/etc/dnsmasq.d/'
    deploy:
      replicas: 2
      placement:
        constraints:
          - "node.hostname!=Home-Nas"